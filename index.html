<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quantinuum RSU Calculator</title>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/prop-types@15/prop-types.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/recharts@2.5.0/umd/Recharts.js"></script>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #030306;
      min-height: 100vh;
    }
    @keyframes float {
      0%, 100% { transform: translate(0, 0) rotate(0deg); }
      33% { transform: translate(20px, -20px) rotate(1deg); }
      66% { transform: translate(-15px, 10px) rotate(-1deg); }
    }
    @keyframes pulse {
      0%, 100% { opacity: 0.5; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.05); }
    }
    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 6px;
      border-radius: 6px;
      background: linear-gradient(90deg, rgba(45, 212, 191, 0.3) 0%, rgba(45, 212, 191, 0.1) 100%);
      cursor: pointer;
      outline: none;
      touch-action: manipulation;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: linear-gradient(135deg, #2dd4bf 0%, #14b8a6 100%);
      cursor: pointer;
      box-shadow: 0 0 0 4px rgba(45, 212, 191, 0.2), 0 4px 16px rgba(45, 212, 191, 0.4);
      transition: all 0.2s ease;
    }
    input[type="range"]::-webkit-slider-thumb:hover,
    input[type="range"]::-webkit-slider-thumb:active {
      transform: scale(1.1);
      box-shadow: 0 0 0 6px rgba(45, 212, 191, 0.3), 0 4px 24px rgba(45, 212, 191, 0.6);
    }
    input[type="range"]::-moz-range-thumb {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: linear-gradient(135deg, #2dd4bf 0%, #14b8a6 100%);
      cursor: pointer;
      border: none;
      box-shadow: 0 0 0 4px rgba(45, 212, 191, 0.2), 0 4px 16px rgba(45, 212, 191, 0.4);
    }
    input[type="range"].tax-slider {
      background: linear-gradient(90deg, rgba(224, 112, 133, 0.3) 0%, rgba(224, 112, 133, 0.1) 100%);
    }
    input[type="range"].tax-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: linear-gradient(135deg, #E07085 0%, #c75d70 100%);
      cursor: pointer;
      box-shadow: 0 0 0 4px rgba(224, 112, 133, 0.2), 0 4px 16px rgba(224, 112, 133, 0.4);
      transition: all 0.2s ease;
    }
    input[type="range"].tax-slider::-webkit-slider-thumb:hover,
    input[type="range"].tax-slider::-webkit-slider-thumb:active {
      transform: scale(1.1);
      box-shadow: 0 0 0 6px rgba(224, 112, 133, 0.3), 0 4px 24px rgba(224, 112, 133, 0.6);
    }
    input[type="range"].tax-slider::-moz-range-thumb {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: linear-gradient(135deg, #E07085 0%, #c75d70 100%);
      cursor: pointer;
      border: none;
      box-shadow: 0 0 0 4px rgba(224, 112, 133, 0.2), 0 4px 16px rgba(224, 112, 133, 0.4);
    }
    .card {
      background: linear-gradient(165deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
      backdrop-filter: blur(40px);
      border: 1px solid rgba(255, 255, 255, 0.08);
      border-radius: 24px;
    }
    .card-inner {
      background: rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.05);
      border-radius: 16px;
    }
    .expand-btn {
      background: none;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 0;
      font-size: 14px;
      font-weight: 500;
      color: rgba(255, 255, 255, 0.5);
      transition: all 0.3s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .expand-btn:hover, .expand-btn:active { color: #2dd4bf; }
    .expand-btn .icon-box {
      width: 28px;
      height: 28px;
      border-radius: 8px;
      background: rgba(45, 212, 191, 0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      font-weight: 300;
      color: #2dd4bf;
    }
    .year-chip {
      padding: 10px 16px;
      border-radius: 12px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.25s ease;
      border: 1px solid transparent;
      -webkit-tap-highlight-color: transparent;
    }
    .year-chip.off {
      background: rgba(255, 255, 255, 0.04);
      color: rgba(255, 255, 255, 0.4);
      border-color: rgba(255, 255, 255, 0.08);
    }
    .year-chip.off:hover, .year-chip.off:active {
      background: rgba(45, 212, 191, 0.1);
      border-color: rgba(45, 212, 191, 0.3);
      color: rgba(255, 255, 255, 0.8);
    }
    .year-chip.on {
      background: rgba(45, 212, 191, 0.2);
      color: #2dd4bf;
      border-color: rgba(45, 212, 191, 0.5);
    }
    .stat-box {
      background: rgba(255, 255, 255, 0.03);
      border: 1px solid rgba(255, 255, 255, 0.06);
      border-radius: 16px;
      padding: 16px;
      text-align: center;
    }
    .stat-box.highlight {
      background: rgba(45, 212, 191, 0.08);
      border-color: rgba(45, 212, 191, 0.25);
    }
    .tab-btn {
      padding: 12px 20px;
      background: transparent;
      border: 1px solid transparent;
      border-radius: 12px;
      color: rgba(255, 255, 255, 0.4);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      white-space: nowrap;
    }
    .tab-btn:hover { color: rgba(255, 255, 255, 0.7); }
    .tab-btn.active {
      color: #2dd4bf;
      background: rgba(45, 212, 191, 0.1);
      border-color: rgba(45, 212, 191, 0.3);
    }
    @media (max-width: 640px) {
      .card { border-radius: 20px; }
      .stat-box { padding: 14px 12px; border-radius: 14px; }
      .tab-btn { padding: 10px 14px; font-size: 13px; }
    }
  </style>
</head>
<body>
  <div id="root" style="display: flex; justify-content: center; align-items: center; min-height: 100vh; color: #2dd4bf; font-family: -apple-system, BlinkMacSystemFont, sans-serif;">
    Loading calculator...
  </div>
  
  <script type="text/babel">
    // Check if Recharts loaded
    if (typeof Recharts === 'undefined') {
      document.getElementById('root').innerHTML = '<div style="color: #f87171;">Error: Failed to load charting library. Please refresh the page.</div>';
      throw new Error('Recharts not loaded');
    }
    
    const { useState, useMemo, useRef, useEffect } = React;
    const { XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Area, ComposedChart, Line } = Recharts;

    // Editable number component
    function EditableNumber({ value, onChange, formatDisplay, prefix, suffix, min, max, step = 1, fontSize = '36px', mobileFontSize = '28px', color = '#2dd4bf', freeInput = false }) {
      const [isEditing, setIsEditing] = useState(false);
      const [inputValue, setInputValue] = useState('');
      const inputRef = useRef(null);

      useEffect(() => {
        if (isEditing && inputRef.current) {
          inputRef.current.focus();
          inputRef.current.select();
        }
      }, [isEditing]);

      const handleClick = () => {
        setInputValue(String(value));
        setIsEditing(true);
      };

      const handleBlur = () => commitValue();

      const handleKeyDown = (e) => {
        if (e.key === 'Enter') commitValue();
        else if (e.key === 'Escape') setIsEditing(false);
      };

      const commitValue = () => {
        let newValue = parseFloat(inputValue.replace(/,/g, ''));
        if (!isNaN(newValue)) {
          newValue = Math.max(min, Math.min(max, newValue));
          // Only round to step if freeInput is false
          if (!freeInput && step >= 1) newValue = Math.round(newValue / step) * step;
          onChange(newValue);
        }
        setIsEditing(false);
      };

      const responsiveFontSize = `clamp(${mobileFontSize}, 5vw, ${fontSize})`;
      const colorWithAlpha = (alpha) => {
        const r = parseInt(color.slice(1, 3), 16);
        const g = parseInt(color.slice(3, 5), 16);
        const b = parseInt(color.slice(5, 7), 16);
        return `rgba(${r}, ${g}, ${b}, ${alpha})`;
      };

      if (isEditing) {
        return (
          <span style={{ display: 'inline-flex', alignItems: 'baseline', flexWrap: 'wrap', gap: '4px' }}>
            {prefix && <span style={{ fontSize: responsiveFontSize, fontWeight: '300', color: color }}>{prefix}</span>}
            <input
              ref={inputRef}
              type="text"
              inputMode="decimal"
              value={inputValue}
              onChange={(e) => setInputValue(e.target.value)}
              onBlur={handleBlur}
              onKeyDown={handleKeyDown}
              style={{
                fontSize: responsiveFontSize,
                fontWeight: '600',
                color: 'white',
                background: colorWithAlpha(0.15),
                border: `2px solid ${colorWithAlpha(0.6)}`,
                borderRadius: '12px',
                padding: '8px 12px',
                width: `${Math.max(inputValue.length, 3) + 2}ch`,
                maxWidth: '100%',
                outline: 'none',
                fontFamily: 'inherit',
              }}
            />
            {suffix && (
              <span style={{ fontSize: '13px', color: colorWithAlpha(0.8), fontWeight: '500' }}>
                {suffix}
              </span>
            )}
          </span>
        );
      }

      return (
        <span 
          onClick={handleClick}
          style={{ 
            cursor: 'pointer',
            display: 'inline-flex',
            alignItems: 'baseline',
            flexWrap: 'wrap',
            gap: '6px',
            padding: '6px 10px',
            margin: '-6px -10px',
            borderRadius: '12px',
            transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
            WebkitTapHighlightColor: 'transparent',
          }}
          onMouseEnter={(e) => e.currentTarget.style.background = colorWithAlpha(0.1)}
          onMouseLeave={(e) => e.currentTarget.style.background = 'transparent'}
          title="Tap to edit"
        >
          {prefix && <span style={{ fontSize: responsiveFontSize, fontWeight: '300', color: color }}>{prefix}</span>}
          <span style={{ fontSize: responsiveFontSize, fontWeight: '600', color: 'white', lineHeight: 1.1, letterSpacing: '-0.02em' }}>
            {formatDisplay ? formatDisplay(value) : value}
          </span>
          {suffix && (
            <span style={{ fontSize: '13px', color: colorWithAlpha(0.8), fontWeight: '500' }}>
              {suffix}
            </span>
          )}
        </span>
      );
    }

    // Responsive hook
    function useWindowSize() {
      const [size, setSize] = useState({ width: typeof window !== 'undefined' ? window.innerWidth : 1200 });
      
      useEffect(() => {
        const handleResize = () => setSize({ width: window.innerWidth });
        window.addEventListener('resize', handleResize);
        return () => window.removeEventListener('resize', handleResize);
      }, []);
      
      return size;
    }

    function RSUCalculator() {
      const { width } = useWindowSize();
      const isMobile = width < 640;
      const isTablet = width < 900;
      
      const [rsuAmount, setRsuAmount] = useState(1000);
      const [ipoValuation, setIpoValuation] = useState(20);
      const [showAdvanced, setShowAdvanced] = useState(false);
      const [totalShares, setTotalShares] = useState(410);
      const [yearsWorked, setYearsWorked] = useState(8);
      const [startYear, setStartYear] = useState(2023);
      const [activeTab, setActiveTab] = useState('scenarios');
      const [taxRate, setTaxRate] = useState(40);
      const [copied, setCopied] = useState(false);
      
      const [historicalGrants, setHistoricalGrants] = useState({
        2020: null, 2021: null, 2022: null, 2023: null, 2024: null, 2025: null, 2026: null,
      });
      
      const [enabledYears, setEnabledYears] = useState({
        2020: false, 2021: false, 2022: false, 2023: false, 2024: false, 2025: false, 2026: false,
      });

      // Growth rate constants
      const BASE_GROWTH = 10;
      const BULL_GROWTH = 60;

      const pricePerShare = useMemo(() => (ipoValuation * 1000) / totalShares, [ipoValuation, totalShares]);

      // Scenario projection data (base vs bull)
      // Grants assumed issued in December, so vesting starts the following year
      const scenarioData = useMemo(() => {
        const getGrantForYear = (year) => {
          if (enabledYears[year] && historicalGrants[year] !== null) return historicalGrants[year];
          return rsuAmount;
        };
        
        const data = [];
        const IPO_YEAR = 2026;
        let cumulativeGranted = 0;
        
        for (let i = 0; i < yearsWorked; i++) {
          const calendarYear = startYear + i;
          const grantThisYear = getGrantForYear(calendarYear);
          cumulativeGranted += grantThisYear;
          
          // Vesting calculation: grants issued in December of year g start vesting in year g+1
          let vested = 0;
          for (let g = 0; g < i; g++) {
            const grantCalendarYear = startYear + g;
            const grantAmount = getGrantForYear(grantCalendarYear);
            const vestingYears = Math.min(i - g, 4); // Years since grant was issued
            vested += vestingYears * (grantAmount / 4);
          }
          
          const yearsOfGrowth = calendarYear >= IPO_YEAR ? calendarYear - IPO_YEAR : 0;
          const baseMultiplier = Math.pow(1 + BASE_GROWTH / 100, yearsOfGrowth);
          const bullMultiplier = Math.pow(1 + BULL_GROWTH / 100, yearsOfGrowth);
          
          const basePrice = pricePerShare * baseMultiplier;
          const bullPrice = pricePerShare * bullMultiplier;
          
          data.push({
            year: `'${String(calendarYear).slice(2)}`,
            fullYear: calendarYear,
            yearIndex: i,
            grantThisYear: grantThisYear,
            totalGranted: cumulativeGranted,
            vested: Math.round(vested),
            unvested: Math.round(cumulativeGranted - vested),
            base: vested * basePrice,
            bull: vested * bullPrice,
            baseValuation: ipoValuation * baseMultiplier,
            bullValuation: ipoValuation * bullMultiplier,
            basePrice,
            bullPrice,
          });
        }
        return data;
      }, [rsuAmount, yearsWorked, startYear, pricePerShare, ipoValuation, historicalGrants, enabledYears]);

      const finalScenarioValues = useMemo(() => {
        const last = scenarioData[scenarioData.length - 1];
        return {
          base: last?.base || 0,
          bull: last?.bull || 0,
          vested: last?.vested || 0,
          unvested: last?.unvested || 0,
          totalGranted: last?.totalGranted || 0,
          baseValuation: last?.baseValuation || ipoValuation,
          bullValuation: last?.bullValuation || ipoValuation,
        };
      }, [scenarioData, ipoValuation]);

      // IPO stats (summer 2026)
      const ipoStats = useMemo(() => {
        const IPO_YEAR = 2026;
        const ipoYearData = scenarioData.find(d => d.fullYear === IPO_YEAR);
        
        let vestedAtIpo = 0;
        let totalGrantedAtIpo = 0;
        
        if (ipoYearData) {
          vestedAtIpo = ipoYearData.vested;
          totalGrantedAtIpo = ipoYearData.totalGranted;
        } else if (startYear + yearsWorked - 1 < IPO_YEAR) {
          // Timeline ends before IPO
          vestedAtIpo = finalScenarioValues.vested;
          totalGrantedAtIpo = finalScenarioValues.totalGranted;
        }
        
        return {
          singleGrantValue: rsuAmount * pricePerShare,
          cumulativeValueAtIpo: vestedAtIpo * pricePerShare,
          vestedAtIpo,
          totalGrantedAtIpo,
          sharePrice: pricePerShare,
        };
      }, [rsuAmount, pricePerShare, scenarioData, startYear, yearsWorked, finalScenarioValues]);

      const toggleYear = (year) => {
        setEnabledYears(prev => {
          const newEnabled = !prev[year];
          // If enabling and no custom grant set, initialize to default
          if (newEnabled && historicalGrants[year] === null) {
            setHistoricalGrants(prevGrants => ({ ...prevGrants, [year]: rsuAmount }));
          }
          return { ...prev, [year]: newEnabled };
        });
      };

      const updateHistoricalGrant = (year, value) => setHistoricalGrants(prev => ({ ...prev, [year]: value }));

      const formatCurrency = (value) => {
        if (value >= 1000000) return `$${(value / 1000000).toFixed(2)}M`;
        if (value >= 1000) return `$${(value / 1000).toFixed(0)}K`;
        return `$${value.toLocaleString('en-US', { maximumFractionDigits: 0 })}`;
      };

      const afterTax = (value) => value * (1 - taxRate / 100);

      const copyTableToClipboard = () => {
        // Header row
        const headers = ['Year', 'New Shares', 'New Value (Base)', 'New Value (Bull)', 'Total Vested', 'Portfolio Base', 'Portfolio Bull'];
        
        // Data rows
        const rows = scenarioData.map((year, i) => {
          const prevVested = i > 0 ? scenarioData[i-1].vested : 0;
          const newlyVested = year.vested - prevVested;
          const newVestingBaseValue = afterTax(newlyVested * year.basePrice);
          const newVestingBullValue = afterTax(newlyVested * year.bullPrice);
          
          return [
            year.fullYear,
            newlyVested,
            newVestingBaseValue.toFixed(2),
            newVestingBullValue.toFixed(2),
            year.vested,
            afterTax(year.base).toFixed(2),
            afterTax(year.bull).toFixed(2)
          ].join('\t');
        });
        
        const tsv = [headers.join('\t'), ...rows].join('\n');
        
        navigator.clipboard.writeText(tsv).then(() => {
          setCopied(true);
          setTimeout(() => setCopied(false), 2000);
        });
      };

      const formatNumber = (value) => value.toLocaleString('en-US', { maximumFractionDigits: 0 });

      const sliderToValue = (sliderVal) => {
        if (sliderVal <= 200) return sliderVal * 10;
        if (sliderVal <= 320) return 2000 + (sliderVal - 200) * 25;
        if (sliderVal <= 370) return 5000 + (sliderVal - 320) * 100;
        return 10000 + (sliderVal - 370) * 1000;
      };

      const valueToSlider = (val) => {
        if (val <= 2000) return val / 10;
        if (val <= 5000) return 200 + (val - 2000) / 25;
        if (val <= 10000) return 320 + (val - 5000) / 100;
        return 370 + (val - 10000) / 1000;
      };

      const ScenarioTooltip = ({ active, payload }) => {
        if (active && payload?.length) {
          const data = payload[0].payload;
          return (
            <div style={{ 
              background: 'rgba(0, 0, 0, 0.95)',
              backdropFilter: 'blur(20px)',
              border: '1px solid rgba(45, 212, 191, 0.4)',
              borderRadius: '16px', 
              padding: '16px 20px',
              boxShadow: '0 20px 40px rgba(0, 0, 0, 0.5)',
              minWidth: '200px'
            }}>
              <div style={{ color: '#2dd4bf', fontSize: '14px', marginBottom: '12px', fontWeight: '600' }}>{data.fullYear}</div>
              <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>
                <div>
                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                    <span style={{ color: '#2ecc71', fontSize: '12px' }}>Bull ({BULL_GROWTH}% CAGR)</span>
                    <span style={{ color: '#fff', fontWeight: '600' }}>{formatCurrency(afterTax(data.bull))}</span>
                  </div>
                  <div style={{ color: 'rgba(255,255,255,0.35)', fontSize: '11px' }}>${data.bullValuation.toFixed(1)}B valuation</div>
                </div>
                <div>
                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                    <span style={{ color: '#2dd4bf', fontSize: '12px' }}>Base ({BASE_GROWTH}% CAGR)</span>
                    <span style={{ color: '#fff', fontWeight: '600' }}>{formatCurrency(afterTax(data.base))}</span>
                  </div>
                  <div style={{ color: 'rgba(255,255,255,0.35)', fontSize: '11px' }}>${data.baseValuation.toFixed(1)}B valuation</div>
                </div>
              </div>
              <div style={{ borderTop: '1px solid rgba(255,255,255,0.1)', marginTop: '12px', paddingTop: '8px', color: 'rgba(255,255,255,0.4)', fontSize: '11px' }}>
                {formatNumber(data.vested)} shares vested <span style={{ color: 'rgba(224, 112, 133, 0.6)' }}>(before tax)</span>
              </div>
            </div>
          );
        }
        return null;
      };

      const availableYears = [2020, 2021, 2022, 2023, 2024, 2025, 2026];
      
      const getYearLabel = (year) => {
        if (year === 2020) {
          return startYear <= 2020 ? "Pre-merger RSUs*" : "Pre-merger RSUs";
        }
        return year;
      };

      return (
        <div style={{ 
          minHeight: '100vh', 
          background: '#030306',
          position: 'relative',
          overflow: 'hidden',
          fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'
        }}>
          {/* Background Effects */}
          <div style={{
            position: 'absolute',
            top: '-10%',
            left: '-20%',
            width: '80vw',
            height: '80vw',
            maxWidth: '800px',
            maxHeight: '800px',
            background: 'radial-gradient(circle, rgba(45, 212, 191, 0.12) 0%, transparent 50%)',
            filter: 'blur(80px)',
            pointerEvents: 'none',
            animation: 'float 30s ease-in-out infinite'
          }} />
          <div style={{
            position: 'absolute',
            bottom: '0',
            right: '-10%',
            width: '60vw',
            height: '60vw',
            maxWidth: '600px',
            maxHeight: '600px',
            background: 'radial-gradient(circle, rgba(20, 184, 166, 0.1) 0%, transparent 50%)',
            filter: 'blur(100px)',
            pointerEvents: 'none',
            animation: 'float 25s ease-in-out infinite reverse'
          }} />
          
          {/* Content */}
          <div style={{ 
            position: 'relative', 
            padding: isMobile ? '24px 16px' : '48px 24px', 
            maxWidth: '920px', 
            margin: '0 auto' 
          }}>
            
            {/* Header */}
            <div style={{ textAlign: 'center', marginBottom: isMobile ? '32px' : '48px' }}>
              <div style={{ 
                display: 'inline-flex', 
                alignItems: 'center', 
                gap: '10px',
                padding: '6px 16px',
                background: 'rgba(45, 212, 191, 0.1)',
                borderRadius: '100px',
                marginBottom: '20px',
                border: '1px solid rgba(45, 212, 191, 0.25)'
              }}>
                <div style={{ 
                  width: '8px', 
                  height: '8px', 
                  borderRadius: '50%', 
                  background: '#2dd4bf',
                  boxShadow: '0 0 12px #2dd4bf',
                  animation: 'pulse 2s ease-in-out infinite' 
                }} />
                <span style={{ color: '#2dd4bf', fontSize: '11px', fontWeight: '700', letterSpacing: '0.15em', textTransform: 'uppercase' }}>
                  Equity Calculator
                </span>
              </div>
              <h1 style={{ 
                fontSize: isMobile ? '32px' : '44px', 
                fontWeight: '700', 
                color: 'white', 
                marginBottom: '12px', 
                letterSpacing: '-0.03em',
                lineHeight: 1.1
              }}>
                <span style={{ 
                  color: '#2dd4bf',
                  textShadow: '0 0 60px rgba(45, 212, 191, 0.5)'
                }}>Quantinuum</span>
                {isMobile && <br />}
                <span style={{ color: 'rgba(255,255,255,0.95)' }}> RSU Value</span>
              </h1>
              <p style={{ color: 'rgba(255, 255, 255, 0.4)', fontSize: '14px' }}>
                <span style={{ fontStyle: 'italic' }}>Calculate the Eigenvalue of Your Equity</span>
              </p>
            </div>

            {/* Main Controls */}
            <div className="card" style={{ padding: isMobile ? '24px 20px' : '36px', marginBottom: '20px' }}>
              <div style={{ 
                display: 'flex', 
                flexDirection: 'column',
                gap: '32px' 
              }}>
                
                {/* RSU Amount */}
                <div>
                  <label style={{ 
                    display: 'flex', 
                    alignItems: 'center', 
                    gap: '8px', 
                    color: 'rgba(255, 255, 255, 0.5)', 
                    fontSize: '11px', 
                    fontWeight: '600', 
                    textTransform: 'uppercase', 
                    letterSpacing: '0.12em',
                    marginBottom: '16px'
                  }}>
                    <div style={{ width: '3px', height: '12px', borderRadius: '2px', background: '#2dd4bf' }} />
                    Annual RSU Grant
                  </label>
                  <div style={{ marginBottom: '20px' }}>
                    <EditableNumber
                      value={rsuAmount}
                      onChange={setRsuAmount}
                      formatDisplay={formatNumber}
                      suffix="shares/yr"
                      min={0}
                      max={10000000}
                      step={1}
                    />
                  </div>
                  <input
                    type="range"
                    min="0"
                    max="460"
                    step="1"
                    value={valueToSlider(rsuAmount)}
                    onChange={(e) => setRsuAmount(sliderToValue(Number(e.target.value)))}
                  />
                  <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '10px', color: 'rgba(255,255,255,0.25)', marginTop: '10px' }}>
                    <span>0</span>
                    <span>100K</span>
                  </div>
                </div>

                {/* IPO Valuation */}
                <div>
                  <label style={{ 
                    display: 'flex', 
                    alignItems: 'center', 
                    gap: '8px', 
                    color: 'rgba(255, 255, 255, 0.5)', 
                    fontSize: '11px', 
                    fontWeight: '600', 
                    textTransform: 'uppercase', 
                    letterSpacing: '0.12em',
                    marginBottom: '16px'
                  }}>
                    <div style={{ width: '3px', height: '12px', borderRadius: '2px', background: '#2dd4bf' }} />
                    IPO Valuation
                  </label>
                  <div style={{ marginBottom: '20px', display: 'flex', alignItems: 'baseline', flexWrap: 'wrap', gap: '2px' }}>
                    <EditableNumber
                      value={ipoValuation}
                      onChange={setIpoValuation}
                      formatDisplay={(v) => v.toFixed(1)}
                      prefix="$"
                      suffix="billion"
                      min={5}
                      max={250}
                      step={0.5}
                    />
                  </div>
                  <input
                    type="range"
                    min="5"
                    max="250"
                    step="0.5"
                    value={ipoValuation}
                    onChange={(e) => setIpoValuation(Number(e.target.value))}
                  />
                  <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '10px', color: 'rgba(255,255,255,0.25)', marginTop: '10px' }}>
                    <span>$5B</span>
                    <span>$250B</span>
                  </div>
                </div>

                {/* Tax Rate */}
                <div>
                  <label style={{ 
                    display: 'flex', 
                    alignItems: 'center', 
                    gap: '10px', 
                    color: 'rgba(255, 255, 255, 0.5)', 
                    fontSize: '11px', 
                    fontWeight: '600', 
                    textTransform: 'uppercase', 
                    letterSpacing: '0.12em',
                    marginBottom: '16px'
                  }}>
                    <div style={{ width: '3px', height: '12px', borderRadius: '2px', background: '#E07085' }} />
                    Estimated Tax Rate
                  </label>
                  <div style={{ marginBottom: '20px', display: 'flex', alignItems: 'baseline', flexWrap: 'wrap', gap: '2px' }}>
                    <EditableNumber
                      value={taxRate}
                      onChange={setTaxRate}
                      formatDisplay={(v) => v.toString()}
                      suffix="%"
                      min={0}
                      max={100}
                      step={1}
                      color="#E07085"
                    />
                  </div>
                  <input
                    type="range"
                    min="0"
                    max="100"
                    step="1"
                    value={taxRate}
                    onChange={(e) => setTaxRate(Number(e.target.value))}
                    className="tax-slider"
                  />
                  <div style={{ display: 'flex', justifyContent: 'space-between', fontSize: '10px', color: 'rgba(255,255,255,0.25)', marginTop: '10px' }}>
                    <span>0%</span>
                    <span>100%</span>
                  </div>
                  <p style={{ fontSize: '11px', color: 'rgba(255,255,255,0.35)', marginTop: '12px', fontStyle: 'italic', lineHeight: 1.6 }}>
                    Illustrative only. Actual rate varies by country, state, filing status, income level, capital gains treatment, holding period, and other factors.
                  </p>
                </div>
              </div>

              {/* Advanced Toggle */}
              <button className="expand-btn" onClick={() => setShowAdvanced(!showAdvanced)} style={{ marginTop: '20px' }}>
                <span className="icon-box">{showAdvanced ? '−' : '+'}</span>
                Advanced Settings
              </button>
              
              {showAdvanced && (
                <div className="card-inner" style={{ marginTop: '12px', padding: isMobile ? '20px 16px' : '24px' }}>
                  <div style={{ marginBottom: '28px' }}>
                    <label style={{ display: 'block', color: 'rgba(255,255,255,0.5)', fontSize: '11px', fontWeight: '600', marginBottom: '14px', textTransform: 'uppercase', letterSpacing: '0.1em' }}>
                      Total Shares Outstanding
                    </label>
                    <div style={{ marginBottom: '14px' }}>
                      <EditableNumber value={totalShares} onChange={setTotalShares} formatDisplay={(v) => v.toString()} suffix="million" min={250} max={1000} step={10} fontSize="26px" mobileFontSize="22px" freeInput={true} />
                    </div>
                    <input type="range" min="250" max="1000" step="10" value={totalShares} onChange={(e) => setTotalShares(Number(e.target.value))} />
                    <p style={{ fontSize: '11px', color: 'rgba(255,255,255,0.3)', marginTop: '10px' }}>Actual count in S-1 filing.</p>
                  </div>

                  <div style={{ borderTop: '1px solid rgba(255,255,255,0.06)', paddingTop: '20px' }}>
                    <div style={{ marginBottom: '16px' }}>
                      <span style={{ color: 'rgba(255,255,255,0.5)', fontSize: '14px', fontWeight: '500' }}>Customize Past Grants</span>
                    </div>

                    <div>
                      <p style={{ fontSize: '12px', color: 'rgba(255,255,255,0.4)', marginBottom: '16px', lineHeight: 1.5 }}>
                        Tap years to customize. Other years use default: <span style={{ color: '#2dd4bf', fontWeight: '600' }}>{formatNumber(rsuAmount)}</span>
                      </p>
                      
                      <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px', marginBottom: '20px' }}>
                        {availableYears.map(year => (
                          <button key={year} className={`year-chip ${enabledYears[year] ? 'on' : 'off'}`} onClick={() => toggleYear(year)}>
                            {getYearLabel(year)}
                          </button>
                        ))}
                      </div>

                      <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>
                        {availableYears.filter(year => enabledYears[year]).map(year => (
                          <div key={year} style={{ padding: '16px', background: 'rgba(45, 212, 191, 0.05)', borderRadius: '12px', border: '1px solid rgba(45, 212, 191, 0.15)' }}>
                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px', flexWrap: 'wrap', gap: '8px' }}>
                              <span style={{ color: '#2dd4bf', fontSize: '14px', fontWeight: '600' }}>{getYearLabel(year)}</span>
                              <EditableNumber value={historicalGrants[year] !== null ? historicalGrants[year] : rsuAmount} onChange={(v) => updateHistoricalGrant(year, v)} formatDisplay={(v) => `${formatNumber(v)}`} suffix="shares" min={0} max={10000000} step={1} fontSize="16px" mobileFontSize="15px" />
                            </div>
                            <input
                              type="range"
                              min="0"
                              max="460"
                              step="1"
                              value={valueToSlider(historicalGrants[year] !== null ? historicalGrants[year] : rsuAmount)}
                              onChange={(e) => updateHistoricalGrant(year, sliderToValue(Number(e.target.value)))}
                            />
                          </div>
                        ))}
                      </div>
                    </div>
                  </div>
                </div>
              )}
            </div>

            {/* IPO Summary Card */}
            <div style={{ 
              background: 'linear-gradient(165deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%)',
              backdropFilter: 'blur(40px)',
              border: '1px solid rgba(45, 212, 191, 0.2)',
              borderRadius: '20px',
              padding: isMobile ? '24px 20px' : '28px',
              marginBottom: '20px',
              position: 'relative',
              overflow: 'hidden'
            }}>
              <div style={{
                position: 'absolute',
                top: 0,
                left: 0,
                right: 0,
                height: '3px',
                background: 'linear-gradient(90deg, #2dd4bf, #14b8a6, #2ecc71)'
              }} />
              
              <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '20px' }}>
                <div style={{ width: '8px', height: '8px', borderRadius: '50%', background: '#2dd4bf', boxShadow: '0 0 8px #2dd4bf' }} />
                <span style={{ color: 'rgba(255,255,255,0.5)', fontSize: '11px', fontWeight: '600', textTransform: 'uppercase', letterSpacing: '0.08em' }}>
                  IPO Projected Value
                </span>
              </div>
              
              <div style={{ 
                display: 'grid', 
                gridTemplateColumns: isMobile ? '1fr' : 'repeat(2, 1fr)', 
                gap: isMobile ? '16px' : '24px',
                marginBottom: '20px'
              }}>
                <div>
                  <div style={{ color: 'rgba(255,255,255,0.4)', fontSize: '11px', marginBottom: '6px', textTransform: 'uppercase', letterSpacing: '0.05em' }}>
                    Single Grant Value <span style={{ color: 'rgba(224, 112, 133, 0.7)', fontSize: '9px' }}>(after tax)</span>
                  </div>
                  <div style={{ fontSize: isMobile ? '28px' : '32px', fontWeight: '700', color: '#2dd4bf', letterSpacing: '-0.02em' }}>
                    {formatCurrency(afterTax(ipoStats.singleGrantValue))}
                  </div>
                  <div style={{ color: 'rgba(255,255,255,0.3)', fontSize: '11px', marginTop: '4px' }}>
                    {formatNumber(rsuAmount)} shares fully vested
                  </div>
                </div>
                
                <div>
                  <div style={{ color: 'rgba(255,255,255,0.4)', fontSize: '11px', marginBottom: '6px', textTransform: 'uppercase', letterSpacing: '0.05em' }}>
                    Vested by IPO <span style={{ color: 'rgba(224, 112, 133, 0.7)', fontSize: '9px' }}>(after tax)</span>
                  </div>
                  <div style={{ fontSize: isMobile ? '28px' : '32px', fontWeight: '700', color: '#fff', letterSpacing: '-0.02em' }}>
                    {formatCurrency(afterTax(ipoStats.cumulativeValueAtIpo))}
                  </div>
                  <div style={{ color: 'rgba(255,255,255,0.3)', fontSize: '11px', marginTop: '4px' }}>
                    {formatNumber(ipoStats.vestedAtIpo)} of {formatNumber(ipoStats.totalGrantedAtIpo)} shares
                  </div>
                </div>
              </div>
              
              {/* Share Price */}
              <div style={{ 
                padding: '14px 20px',
                background: 'rgba(45, 212, 191, 0.06)',
                borderRadius: '14px',
                border: '1px solid rgba(45, 212, 191, 0.15)',
                display: 'flex',
                alignItems: 'center',
                justifyContent: 'center',
                flexWrap: 'wrap',
                gap: '8px'
              }}>
                <span style={{ color: 'rgba(255,255,255,0.45)', fontSize: '13px' }}>Share price at IPO:</span>
                <span style={{ color: '#2dd4bf', fontWeight: '700', fontSize: '17px' }}>${pricePerShare.toFixed(2)}</span>
                <span style={{ color: 'rgba(255,255,255,0.25)', fontSize: '11px' }}>
                  (${ipoValuation}B ÷ {totalShares}M shares)
                </span>
              </div>
            </div>

            {/* Tabs */}
            <div style={{ display: 'flex', gap: '8px', marginBottom: '20px', overflowX: 'auto', paddingBottom: '4px' }}>
              {[
                { id: 'scenarios', label: 'Growth Scenarios' },
                { id: 'timeline', label: 'Vesting Timeline' },
              ].map(tab => (
                <button 
                  key={tab.id}
                  className={`tab-btn ${activeTab === tab.id ? 'active' : ''}`}
                  onClick={() => setActiveTab(tab.id)}
                >
                  {tab.label}
                </button>
              ))}
            </div>

            {/* Tab Content */}
            {activeTab === 'scenarios' && (
              <div className="card" style={{ padding: isMobile ? '24px 20px' : '36px' }}>
                {/* Time Controls */}
                <div style={{ display: 'grid', gridTemplateColumns: isTablet ? '1fr' : '1fr 1fr', gap: '12px', marginBottom: '28px' }}>
                  <div className="card-inner" style={{ padding: isMobile ? '18px 16px' : '20px' }}>
                    <label style={{ display: 'block', color: 'rgba(255,255,255,0.45)', fontSize: '10px', fontWeight: '600', marginBottom: '10px', textTransform: 'uppercase', letterSpacing: '0.1em' }}>
                      Start Year
                    </label>
                    <div style={{ marginBottom: '10px' }}>
                      <EditableNumber value={startYear} onChange={setStartYear} formatDisplay={(v) => v <= 2020 ? '2020 or earlier' : v.toString()} min={2020} max={2026} step={1} fontSize="24px" mobileFontSize="22px" />
                    </div>
                    <input type="range" min="2020" max="2026" step="1" value={Math.max(2020, startYear)} onChange={(e) => setStartYear(Number(e.target.value))} />
                    {startYear <= 2020 && (
                      <p style={{ fontSize: '10px', color: 'rgba(255,255,255,0.35)', marginTop: '8px', fontStyle: 'italic' }}>
                        * change pre-merger RSU # above in advanced settings
                      </p>
                    )}
                  </div>

                  <div className="card-inner" style={{ padding: isMobile ? '18px 16px' : '20px' }}>
                    <label style={{ display: 'block', color: 'rgba(255,255,255,0.45)', fontSize: '10px', fontWeight: '600', marginBottom: '10px', textTransform: 'uppercase', letterSpacing: '0.1em' }}>
                      Years at Company
                    </label>
                    <div style={{ marginBottom: '10px' }}>
                      <EditableNumber value={yearsWorked} onChange={setYearsWorked} formatDisplay={(v) => v.toString()} suffix="yrs" min={1} max={10} step={1} fontSize="24px" mobileFontSize="22px" />
                    </div>
                    <input type="range" min="1" max="10" step="1" value={yearsWorked} onChange={(e) => setYearsWorked(Number(e.target.value))} />
                  </div>
                </div>

                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '24px', flexWrap: 'wrap', gap: '12px' }}>
                  <div>
                    <h2 style={{ fontSize: '18px', fontWeight: '600', color: 'white', marginBottom: '4px' }}>
                      {yearsWorked}-Year Growth Projection
                    </h2>
                    <p style={{ color: 'rgba(255,255,255,0.4)', fontSize: '12px' }}>
                      ${ipoValuation}B at IPO (summer 2026), then growth begins
                    </p>
                  </div>
                  <div style={{ display: 'flex', gap: '16px' }}>
                    <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>
                      <div style={{ width: '12px', height: '3px', background: '#2dd4bf', borderRadius: '2px' }} />
                      <span style={{ color: 'rgba(255,255,255,0.5)', fontSize: '11px' }}>Base {BASE_GROWTH}%</span>
                    </div>
                    <div style={{ display: 'flex', alignItems: 'center', gap: '6px' }}>
                      <div style={{ width: '12px', height: '3px', background: '#2ecc71', borderRadius: '2px' }} />
                      <span style={{ color: 'rgba(255,255,255,0.5)', fontSize: '11px' }}>Bull {BULL_GROWTH}%</span>
                    </div>
                  </div>
                </div>
                
                <div style={{ height: isMobile ? '260px' : '320px', marginBottom: '24px' }}>
                  <ResponsiveContainer width="100%" height="100%">
                    <ComposedChart data={scenarioData} margin={{ top: 10, right: 10, left: 0, bottom: 0 }}>
                      <defs>
                        <linearGradient id="baseGrad" x1="0" y1="0" x2="0" y2="1">
                          <stop offset="0%" stopColor="#2dd4bf" stopOpacity={0.3} />
                          <stop offset="100%" stopColor="#2dd4bf" stopOpacity={0} />
                        </linearGradient>
                        <linearGradient id="bullGrad" x1="0" y1="0" x2="0" y2="1">
                          <stop offset="0%" stopColor="#2ecc71" stopOpacity={0.3} />
                          <stop offset="100%" stopColor="#2ecc71" stopOpacity={0} />
                        </linearGradient>
                      </defs>
                      <CartesianGrid strokeDasharray="3 3" stroke="rgba(255,255,255,0.04)" vertical={false} />
                      <XAxis dataKey="year" axisLine={false} tickLine={false} tick={{ fill: 'rgba(255,255,255,0.35)', fontSize: 11 }} />
                      <YAxis 
                        axisLine={false} 
                        tickLine={false} 
                        tick={{ fill: 'rgba(255,255,255,0.35)', fontSize: 11 }}
                        tickFormatter={(v) => v >= 1e6 ? `$${(v/1e6).toFixed(0)}M` : `$${(v/1e3).toFixed(0)}K`}
                        width={55}
                      />
                      <Tooltip content={<ScenarioTooltip />} />
                      <Area type="monotone" dataKey="bull" stroke="transparent" fill="url(#bullGrad)" />
                      <Area type="monotone" dataKey="base" stroke="transparent" fill="url(#baseGrad)" />
                      <Line type="monotone" dataKey="bull" stroke="#2ecc71" strokeWidth={2.5} dot={false} />
                      <Line type="monotone" dataKey="base" stroke="#2dd4bf" strokeWidth={2.5} dot={false} />
                    </ComposedChart>
                  </ResponsiveContainer>
                </div>

                {/* Outcome Comparison */}
                <div style={{ 
                  padding: '20px', 
                  background: 'rgba(0, 0, 0, 0.3)', 
                  borderRadius: '16px',
                  border: '1px solid rgba(255,255,255,0.05)'
                }}>
                  <div style={{ color: 'rgba(255,255,255,0.4)', fontSize: '11px', marginBottom: '16px', textTransform: 'uppercase', letterSpacing: '0.08em', fontWeight: '600' }}>
                    {startYear + yearsWorked - 1} Portfolio Value <span style={{ color: 'rgba(224, 112, 133, 0.7)', fontSize: '9px', textTransform: 'none', letterSpacing: 'normal' }}>(after {taxRate}% tax)</span>
                  </div>
                  <div style={{ display: 'grid', gridTemplateColumns: isMobile ? '1fr' : '1fr 1fr', gap: '12px' }}>
                    <div style={{ padding: '18px', background: 'rgba(45, 212, 191, 0.1)', borderRadius: '12px', border: '1px solid rgba(45, 212, 191, 0.25)' }}>
                      <div style={{ display: 'flex', alignItems: 'center', gap: '6px', marginBottom: '8px' }}>
                        <div style={{ width: '6px', height: '6px', borderRadius: '50%', background: '#2dd4bf' }} />
                        <span style={{ color: '#2dd4bf', fontSize: '12px', fontWeight: '600' }}>Base Case</span>
                        <span style={{ color: 'rgba(255,255,255,0.3)', fontSize: '10px' }}>({BASE_GROWTH}% CAGR)</span>
                      </div>
                      <div style={{ fontSize: '28px', fontWeight: '700', color: '#fff', marginBottom: '8px' }}>{formatCurrency(afterTax(finalScenarioValues.base))}</div>
                      <div style={{ color: 'rgba(255,255,255,0.35)', fontSize: '11px' }}>
                        Company valuation: <span style={{ color: 'rgba(255,255,255,0.6)' }}>${finalScenarioValues.baseValuation.toFixed(1)}B</span>
                      </div>
                      <div style={{ color: 'rgba(255,255,255,0.25)', fontSize: '10px', marginTop: '2px' }}>
                        S&P 500 historical average
                      </div>
                    </div>
                    <div style={{ padding: '18px', background: 'rgba(46, 204, 113, 0.1)', borderRadius: '12px', border: '1px solid rgba(46, 204, 113, 0.25)' }}>
                      <div style={{ display: 'flex', alignItems: 'center', gap: '6px', marginBottom: '8px' }}>
                        <div style={{ width: '6px', height: '6px', borderRadius: '50%', background: '#2ecc71' }} />
                        <span style={{ color: '#2ecc71', fontSize: '12px', fontWeight: '600' }}>Bull Case</span>
                        <span style={{ color: 'rgba(255,255,255,0.3)', fontSize: '10px' }}>({BULL_GROWTH}% CAGR)</span>
                      </div>
                      <div style={{ fontSize: '28px', fontWeight: '700', color: '#fff', marginBottom: '8px' }}>{formatCurrency(afterTax(finalScenarioValues.bull))}</div>
                      <div style={{ color: 'rgba(255,255,255,0.35)', fontSize: '11px' }}>
                        Company valuation: <span style={{ color: 'rgba(255,255,255,0.6)' }}>${finalScenarioValues.bullValuation.toFixed(1)}B</span>
                      </div>
                      <div style={{ color: 'rgba(255,255,255,0.25)', fontSize: '10px', marginTop: '2px' }}>
                        Quantinuum growth since merger
                      </div>
                    </div>
                  </div>
                  <div style={{ marginTop: '16px', padding: '12px 16px', background: 'rgba(255,255,255,0.03)', borderRadius: '10px', textAlign: 'center' }}>
                    <span style={{ color: 'rgba(255,255,255,0.4)', fontSize: '12px' }}>
                      Bull case is <span style={{ color: '#2ecc71', fontWeight: '700' }}>{((finalScenarioValues.bull / finalScenarioValues.base - 1) * 100).toFixed(0)}%</span> higher
                    </span>
                    <span style={{ color: 'rgba(255,255,255,0.25)', fontSize: '11px', marginLeft: '8px' }}>
                      ({formatNumber(finalScenarioValues.vested)} shares vested<span style={{ color: 'rgba(224, 112, 133, 0.5)' }}>, before tax</span>)
                    </span>
                  </div>
                  <div style={{ marginTop: '12px', color: 'rgba(255,255,255,0.3)', fontSize: '10px', textAlign: 'center', lineHeight: 1.5 }}>
                    IPO: Assumed summer 2026 at slider valuation • Base: 10% CAGR (S&P 500 historical) • Bull: 60% CAGR (Quantinuum since merger)
                  </div>
                  <div style={{ marginTop: '10px', color: 'rgba(255,255,255,0.2)', fontSize: '10px', textAlign: 'center', fontStyle: 'italic', lineHeight: 1.4 }}>
                    *For illustrative purposes only. This calculator does not constitute financial, tax, or investment advice. Projections do not account for taxes, fees, dilution from future funding rounds, or other factors that may significantly impact actual returns. Past performance does not guarantee future results. Consult a qualified financial advisor before making investment decisions.
                  </div>
                </div>
              </div>
            )}

            {activeTab === 'timeline' && (
              <div className="card" style={{ padding: isMobile ? '24px 16px' : '36px' }}>
                <div style={{ marginBottom: '24px', display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', flexWrap: 'wrap', gap: '12px' }}>
                  <div>
                    <h2 style={{ fontSize: '18px', fontWeight: '600', color: 'white', marginBottom: '4px' }}>
                      Vesting Schedule
                    </h2>
                    <p style={{ color: 'rgba(255,255,255,0.4)', fontSize: '12px' }}>
                      4-year vesting: 25% annually (grants issued in December)
                    </p>
                    <p style={{ color: 'rgba(224, 112, 133, 0.6)', fontSize: '11px', marginTop: '8px' }}>
                      All values shown after {taxRate}% estimated tax
                    </p>
                  </div>
                  <button
                    onClick={copyTableToClipboard}
                    style={{
                      padding: '8px 16px',
                      background: copied ? 'rgba(46, 204, 113, 0.2)' : 'rgba(255, 255, 255, 0.05)',
                      border: copied ? '1px solid rgba(46, 204, 113, 0.4)' : '1px solid rgba(255, 255, 255, 0.1)',
                      borderRadius: '8px',
                      color: copied ? '#2ecc71' : 'rgba(255, 255, 255, 0.6)',
                      fontSize: '12px',
                      fontWeight: '500',
                      cursor: 'pointer',
                      display: 'flex',
                      alignItems: 'center',
                      gap: '6px',
                      transition: 'all 0.2s ease'
                    }}
                  >
                    {copied ? (
                      <>
                        <span style={{ fontSize: '14px' }}>✓</span>
                        Copied!
                      </>
                    ) : (
                      <>
                        <span style={{ fontSize: '14px' }}>📋</span>
                        Copy to Excel
                      </>
                    )}
                  </button>
                </div>

                {/* Clean Table */}
                <div style={{ overflowX: 'auto', marginLeft: isMobile ? '-16px' : '0', marginRight: isMobile ? '-16px' : '0', paddingLeft: isMobile ? '16px' : '0', paddingRight: isMobile ? '16px' : '0' }}>
                  <table style={{ width: '100%', borderCollapse: 'collapse', minWidth: '520px' }}>
                    <thead>
                      <tr style={{ borderBottom: '1px solid rgba(255,255,255,0.1)' }}>
                        <th style={{ padding: '12px 8px', textAlign: 'left', color: 'rgba(255,255,255,0.4)', fontSize: '10px', fontWeight: '600', textTransform: 'uppercase', letterSpacing: '0.05em' }}>Year</th>
                        <th style={{ padding: '12px 8px', textAlign: 'right', color: 'rgba(255,255,255,0.4)', fontSize: '10px', fontWeight: '600', textTransform: 'uppercase', letterSpacing: '0.05em' }}>New Shares</th>
                        <th style={{ padding: '12px 8px', textAlign: 'right', color: 'rgba(255,255,255,0.4)', fontSize: '10px', fontWeight: '600', textTransform: 'uppercase', letterSpacing: '0.05em' }}>New Value</th>
                        <th style={{ padding: '12px 8px', textAlign: 'right', color: 'rgba(255,255,255,0.4)', fontSize: '10px', fontWeight: '600', textTransform: 'uppercase', letterSpacing: '0.05em' }}>Total Vested</th>
                        <th style={{ padding: '12px 8px', textAlign: 'right', color: 'rgba(45, 212, 191, 0.7)', fontSize: '10px', fontWeight: '600', textTransform: 'uppercase', letterSpacing: '0.05em' }}>Base Value</th>
                        <th style={{ padding: '12px 8px', textAlign: 'right', color: 'rgba(46, 204, 113, 0.7)', fontSize: '10px', fontWeight: '600', textTransform: 'uppercase', letterSpacing: '0.05em' }}>Bull Value</th>
                      </tr>
                    </thead>
                    <tbody>
                      {scenarioData.map((year, i) => {
                        const prevVested = i > 0 ? scenarioData[i-1].vested : 0;
                        const newlyVested = year.vested - prevVested;
                        const newVestingBaseValue = afterTax(newlyVested * year.basePrice);
                        const newVestingBullValue = afterTax(newlyVested * year.bullPrice);
                        const isLastRow = i === scenarioData.length - 1;
                        
                        return (
                          <tr 
                            key={i} 
                            style={{ 
                              borderBottom: isLastRow ? 'none' : '1px solid rgba(255,255,255,0.05)',
                              background: isLastRow ? 'rgba(45, 212, 191, 0.05)' : 'transparent'
                            }}
                          >
                            <td style={{ padding: '14px 8px', color: 'white', fontSize: '14px', fontWeight: '600' }}>
                              {year.fullYear}
                            </td>
                            <td style={{ padding: '14px 8px', textAlign: 'right', color: 'rgba(255,255,255,0.6)', fontSize: '14px' }}>
                              +{formatNumber(newlyVested)}
                            </td>
                            <td style={{ padding: '14px 8px', textAlign: 'right' }}>
                              <div style={{ color: '#2dd4bf', fontSize: '13px', fontWeight: '500' }}>{formatCurrency(newVestingBaseValue)}</div>
                              <div style={{ color: '#2ecc71', fontSize: '11px', opacity: 0.8 }}>{formatCurrency(newVestingBullValue)}</div>
                            </td>
                            <td style={{ padding: '14px 8px', textAlign: 'right', color: 'white', fontSize: '14px', fontWeight: '500' }}>
                              {formatNumber(year.vested)}
                            </td>
                            <td style={{ padding: '14px 8px', textAlign: 'right', color: '#2dd4bf', fontSize: '14px', fontWeight: '600' }}>
                              {formatCurrency(afterTax(year.base))}
                            </td>
                            <td style={{ padding: '14px 8px', textAlign: 'right', color: '#2ecc71', fontSize: '14px', fontWeight: '600' }}>
                              {formatCurrency(afterTax(year.bull))}
                            </td>
                          </tr>
                        );
                      })}
                    </tbody>
                  </table>
                </div>

                {/* Forfeiture Note */}
                <div style={{ 
                  marginTop: '20px', 
                  padding: '14px 16px', 
                  background: 'rgba(248, 113, 113, 0.08)', 
                  borderRadius: '12px',
                  border: '1px solid rgba(248, 113, 113, 0.15)'
                }}>
                  <p style={{ color: 'rgba(255,255,255,0.5)', fontSize: '12px', lineHeight: 1.5 }}>
                    <span style={{ color: '#f87171', fontWeight: '600' }}>If you leave:</span> Unvested shares are forfeited. After {yearsWorked} years, you'd have <span style={{ color: 'white', fontWeight: '600' }}>{formatNumber(finalScenarioValues.vested)}</span> vested shares ({formatNumber(finalScenarioValues.totalGranted)} granted) and forfeit <span style={{ color: '#f87171', fontWeight: '600' }}>{formatNumber(finalScenarioValues.unvested)}</span> unvested.
                  </p>
                </div>
              </div>
            )}
          </div>
        </div>
      );
    }

    try {
      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<RSUCalculator />);
    } catch (error) {
      console.error('Render error:', error);
      document.getElementById('root').innerHTML = '<div style="color: #f87171; padding: 20px;">Error rendering calculator. Please check the console for details.</div>';
    }
  </script>
</body>
</html>
